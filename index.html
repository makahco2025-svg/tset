<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>عروض أسواق تبارك</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root {
            --primary-color: #dc3545;
            --primary-color-dark: #a71d2a;
            --secondary-color: #6c757d;
            --background-color: #f4f6f9;
            --card-background: #ffffff;
            --text-color: #333;
            --heading-color: #c82333;
            --shadow: 0 5px 15px rgba(0,0,0,0.08);
            --gold-color: #ffc107;
        }
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Tajawal', 'Segoe UI', Tahoma, sans-serif;
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            background-image: url('https://images.unsplash.com/photo-1583258292688-d0213dc5a3a8?w=1200&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
            padding-top: 320px;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(244, 246, 249, 0.92);
            z-index: -1;
        }
        
        .announcement-bar {
            background: linear-gradient(135deg, #dc3545 0%, #a71d2a 100%);
            color: white;
            padding: 12px 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 3000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .announcement-left {
            display: flex;
            align-items: center;
            padding: 0 20px;
        }
        
        .announcement-logo {
            width: 40px;
            height: 40px;
            margin-left: 15px;
            filter: brightness(0) invert(1);
        }
        
        .announcement-text {
            font-weight: 700;
            font-size: 1.2em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        
        .announcement-right {
            display: flex;
            align-items: center;
            padding: 0 20px;
        }
        
        .announcement-links {
            display: flex;
            gap: 15px;
        }
        
        .announcement-link {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
            padding: 5px 10px;
            border-radius: 20px;
            background-color: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }
        
        .announcement-link:hover {
            background-color: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        
        .announcement-badge {
            background-color: var(--gold-color);
            color: #333;
            font-size: 0.8em;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: bold;
            margin-right: 5px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .secondary-announcement-bar {
            background: linear-gradient(90deg, rgba(255,193,7,0.9) 0%, rgba(255,152,0,0.9) 100%);
            color: #333;
            text-align: center;
            padding: 12px 0;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 0;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .secondary-announcement-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            20% { left: 100%; }
            100% { left: 100%; }
        }

        .controls-container {
            position: fixed;
            top: 85px;
            left: 0;
            right: 0;
            z-index: 2500;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: saturate(180%) blur(10px);
            -webkit-backdrop-filter: saturate(180%) blur(10px);
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: top 0.3s ease-in-out;
        }
        
        .controls-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        #search-container {
            margin-bottom: 25px;
            position: relative;
        }

        #search-input {
            width: 100%;
            padding: 12px 40px 12px 20px;
            font-size: 1.1em;
            border: 1px solid #ddd;
            border-radius: 25px;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        #search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        #search-container .fa-search {
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            color: #aaa;
        }

        #category-filter {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .filter-btn {
            padding: 8px 18px;
            font-size: 1em;
            font-family: inherit;
            border: 1px solid var(--primary-color);
            background-color: transparent;
            color: var(--primary-color);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
        }
        .filter-btn:hover,
        .filter-btn.active {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.85) 0%, rgba(167, 29, 42, 0.95) 100%), url('https://images.unsplash.com/photo-1542838132-92c53300491e?w=1200&q=80') no-repeat center center/cover;
            color: white;
            padding: 40px 20px;
            border-radius: 0 0 15px 15px;
            text-align: center;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }
        header h1 {
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-size: 2.5em;
            margin: 0 0 20px 0;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        .logo {
            width: 60px;
            height: 60px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }
        .contact-info {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            font-size: 1.1em;
        }
        .contact-info a, .contact-info span {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }
        .contact-info a:hover {
            opacity: 0.8;
        }
        .contact-info i {
            margin-left: 8px;
        }

        .section-title {
            text-align: center;
            font-size: 2em;
            color: var(--heading-color);
            margin-bottom: 30px;
            position: relative;
        }
        .section-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 3px;
            background-color: var(--primary-color);
            margin: 8px auto 0;
        }

        .slider-section {
            margin: 40px 0;
            position: relative;
        }
        
        .simple-slider {
            position: relative;
            width: 100%;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            background: #fff;
        }
        
        .slide {
            display: none;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%);
        }
        
        .slide.active {
            display: flex;
            align-items: center;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .slide-content {
            display: flex;
            width: 100%;
            align-items: center;
            gap: 30px;
        }
        
        .slide-image {
            flex: 1;
            max-width: 40%;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .slide-image img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .slide-image:hover img {
            transform: scale(1.05);
        }
        
        .slide-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 2;
        }
        
        .slide-info {
            flex: 1;
            padding: 20px;
        }
        
        .slide-title {
            font-size: 2em;
            color: var(--primary-color);
            margin: 0 0 15px 0;
            font-weight: bold;
        }
        
        .slide-description {
            font-size: 1.1em;
            color: var(--text-color);
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .slide-price {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .slide-new-price {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .slide-old-price {
            font-size: 1.2em;
            color: var(--secondary-color);
            text-decoration: line-through;
        }
        
        .slide-cta {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 1.1em;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
            border: none;
            cursor: pointer;
        }
        
        .slide-cta:hover {
            background: var(--primary-color-dark);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(220, 53, 69, 0.4);
        }
        
        .slider-controls {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 10;
        }
        
        .slider-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-size: 1.2em;
            color: var(--primary-color);
        }
        
        .slider-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.1);
        }
        
        .slider-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .indicator.active {
            background: var(--primary-color);
            width: 30px;
            border-radius: 6px;
        }
        
        .offers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .offer-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .offer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .offer-card-image {
            height: 180px;
            overflow: hidden;
            position: relative;
        }
        
        .offer-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .offer-card:hover .offer-card-image img {
            transform: scale(1.1);
        }
        
        .offer-card-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .offer-card-content {
            padding: 15px;
            text-align: center;
        }
        
        .offer-card-title {
            font-size: 1.1em;
            margin: 0 0 10px 0;
            color: var(--text-color);
        }
        
        .offer-card-price {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .offer-card-new-price {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .offer-card-old-price {
            font-size: 1em;
            color: var(--secondary-color);
            text-decoration: line-through;
        }
        
        .offer-card-btn {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .offer-card-btn:hover {
            background: var(--primary-color-dark);
            transform: translateY(-2px);
        }

        .visitor-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            font-weight: bold;
        }
        
        .visitor-counter i {
            font-size: 1.2em;
        }

        #product-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        .product-card {
            background-color: var(--card-background);
            border: 1px solid #eee;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform .2s ease, box-shadow .2s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            cursor: pointer;
        }
        .product-info {
            padding: 20px;
            text-align: center;
            flex-grow: 1;
        }
        .product-info h3 {
            margin: 0 0 10px 0;
            color: var(--text-color);
        }
        .product-info .price {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--primary-color);
        }
        .product-info .new-price {
             font-size: 1.3em;
        }

        .location-section {
            background-color: var(--card-background);
            padding: 40px;
            margin-top: 40px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        .location-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            align-items: center;
        }
        .location-details, .location-map {
            flex: 1;
            min-width: 300px;
        }
        .location-details {
            text-align: right;
        }
        .location-details h3 {
             font-size: 1.5em;
             color: var(--text-color);
             margin-bottom: 15px;
        }
        .location-details p {
            font-size: 1.1em;
            line-height: 1.8;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }
        .location-details i {
            color: var(--primary-color);
            margin-left: 10px;
        }
        .map-container {
            position: relative;
            overflow: hidden;
            padding-top: 75%;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .map-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            padding-top: 60px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
        }
        .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            animation-name: zoom;
            animation-duration: 0.6s;
        }
        @keyframes zoom {
            from {transform:scale(0)} 
            to {transform:scale(1)}
        }
        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            font-size: 1.2em;
        }
        .close-modal {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }
        .close-modal:hover,
        .close-modal:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
        
        .search-results-container {
            display: none;
            padding: 20px 0;
            margin-top: 20px;
        }
        
        .search-results-container.active {
            display: block;
        }
        
        .search-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .search-results-title {
            font-size: 1.5em;
            color: var(--heading-color);
            margin: 0;
        }
        
        .clear-search-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .clear-search-btn:hover {
            background-color: #5a6268;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: var(--secondary-color);
            font-size: 1.2em;
        }
        
        .hide-on-search {
            transition: opacity 0.3s ease;
        }
        
        /* Responsive Styles */
        @media (max-width: 1200px) {
            .container { padding: 15px; }
            header h1 { font-size: 2.2em; }
            .section-title { font-size: 1.8em; }
        }
        
        @media (max-width: 992px) {
            .slide-content { flex-direction: column; }
            .slide-image { max-width: 100%; }
            .slide-title { font-size: 1.8em; }
            .slide-description { font-size: 1em; }
            .offers-grid { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 15px; }
            #product-list { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px; }
        }
        
        @media (max-width: 768px) {
            body { padding-top: 300px; }
            .location-content { flex-direction: column; }
            .location-details { text-align: center; margin-bottom: 20px; }
            .announcement-bar { flex-direction: column; padding: 10px 0; }
            .announcement-left, .announcement-right { padding: 5px 20px; }
            .announcement-links { flex-wrap: wrap; justify-content: center; }
            .announcement-text { font-size: 1em; }
            .slide { padding: 20px; }
            .slide-title { font-size: 1.5em; }
            .slide-new-price { font-size: 1.4em; }
            .controls-container { top: 125px; }
            #search-container { margin-bottom: 20px; }
            header { padding: 30px 15px; }
            header h1 { font-size: 2em; }
            .contact-info { font-size: 1em; flex-direction: column; gap: 10px; }
            .section-title { font-size: 1.6em; }
            .offers-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
            #product-list { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 15px; }
            .location-section { padding: 30px 20px; }
        }
        
        @media (max-width: 576px) {
            body { padding-top: 310px; }
            .controls-container { top: 185px; }
            #search-container { margin-bottom: 15px; }
            .visitor-counter { bottom: 90px; right: 20px; font-size: 0.9em; }
            .slider-btn { width: 40px; height: 40px; font-size: 1em; }
            header { padding: 20px 15px; }
            header h1 { font-size: 1.8em; flex-direction: column; gap: 10px; }
            .logo { width: 50px; height: 50px; }
            .section-title { font-size: 1.4em; margin-bottom: 20px; }
            .offers-grid { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 10px; }
            #product-list { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; }
            .product-card img { height: 180px; }
            .product-info { padding: 15px; }
            .product-info h3 { font-size: 1em; margin-bottom: 8px; }
            .product-info .price { font-size: 1.1em; }
            .add-to-cart-btn { padding: 6px 12px; font-size: 0.9em; }
            .location-section { padding: 20px 15px; }
            .location-details h3 { font-size: 1.3em; }
            .location-details p { font-size: 1em; }
        }

        /* Shopping Cart Styles */
        .cart-icon {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            transition: transform 0.3s;
        }
        .cart-icon:hover { transform: scale(1.1); }
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ffc107;
            color: #333;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            z-index: 3500; 
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        .cart-sidebar.active { right: 0; }
        .cart-header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-items { flex: 1; overflow-y: auto; padding: 20px; }
        .cart-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
            margin-left: 15px;
        }
        .cart-item-info { flex: 1; }
        .cart-item-name { font-weight: bold; margin-bottom: 5px; }
        .cart-item-price { color: var(--primary-color); }
        .quantity-controls { display: flex; align-items: center; gap: 10px; }
        .quantity-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 5px;
        }
        .cart-footer { padding: 20px; border-top: 1px solid #eee; }
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .delivery-fee {
            display: flex;
            justify-content: space-between;
            font-size: 1em;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }
        .final-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        .checkout-btn {
            width: 100%;
            padding: 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background 0.3s;
        }
        .checkout-btn:hover { background: var(--primary-color-dark); }
        .close-cart {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        /* Checkout Form Styles */
        .checkout-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 4000;
            align-items: center;
            justify-content: center;
        }
        .checkout-modal.active { display: flex; }
        .checkout-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .checkout-form h2 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group label.required::after { content: " *"; color: red; }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }
        .form-group input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        .submit-order-btn {
            width: 100%;
            padding: 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background 0.3s;
        }
        .submit-order-btn:hover { background: var(--primary-color-dark); }
        .close-modal-btn {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        /* Success Message Styles */
        .success-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 5000;
            text-align: center;
        }
        .success-message.active { display: block; }
        .success-message h3 { color: #28a745; margin-bottom: 15px; }
        .success-message p { margin-bottom: 20px; }
        .success-message button {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .add-to-cart-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        .add-to-cart-btn:hover { background-color: var(--primary-color-dark); }

        /* Location Button Styles */
        .location-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 5px;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .location-btn:hover { background-color: #218838; }
        .location-status {
            margin-top: 5px;
            font-size: 0.9em;
            color: #666;
        }
        .location-status.success { color: #28a745; }
        .location-status.error { color: #dc3545; }

        @media (max-width: 768px) {
            .cart-sidebar { width: 100%; right: -100%; }
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "gifenc": "https://aistudiocdn.com/gifenc@^1.0.3",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.20.0"
  }
}
</script>
</head>
<body>
    <div class="announcement-bar">
        <div class="announcement-left">
            <img src="https://www2.0zz0.com/2025/09/26/15/391899626.png" alt="شعار أسواق تبارك" class="announcement-logo">
            <div class="announcement-text">أسواق تبارك - جودة تضمنها</div>
        </div>
        <div class="announcement-right">
            <div class="announcement-links">
                <a href="tel:+2010305660XX" class="announcement-link">
                    <i class="fas fa-phone-alt"></i>
                    اتصل بنا
                </a>
                <a href="https://wa.me/2010305660XX" target="_blank" class="announcement-link">
                    <i class="fab fa-whatsapp"></i>
                    واتساب
                </a>
                <a href="#" class="announcement-link">
                    <span class="announcement-badge">جديد</span>
                    <i class="fas fa-percentage"></i>
                    عروض حصرية
                </a>
            </div>
        </div>
    </div>
    
    <div class="controls-container">
        <div class="controls-wrapper">
            <div id="search-container">
                <input type="text" id="search-input" placeholder="ابحث عن منتج...">
                <i class="fas fa-search"></i>
            </div>
            <div id="category-filter"></div>
        </div>
    </div>
    
    <div class="container">
        <header class="hide-on-search">
            <h1><img src="https://www2.0zz0.com/2025/09/26/15/391899626.png" alt="شعار أسواق تبارك" class="logo">أسواق تبارك</h1>
            <div class="contact-info">
                <span><i class="fas fa-map-marker-alt"></i>حدائق أكتوبر 390 فدان امام الملعب سنتر الفردوس</span>
                <a href="tel:+2010305660XX"><i class="fas fa-phone-alt"></i>+2010305660XX (دليفري)</a>
                <a href="https://wa.me/2010305660XX" target="_blank"><i class="fab fa-whatsapp"></i>+2010305660XX (واتساب)</a>
            </div>
        </header>
        <div class="secondary-announcement-bar hide-on-search">
            <i class="fas fa-bullhorn"></i> عروضنا الكبرى كل يوم جمعة من كل أسبوع - خصومات تصل إلى 50% على المنتجات المختارة
        </div>

        <section class="slider-section hide-on-search">
            <h2 class="section-title">أكثر العروض توفيراً</h2>
            <div class="simple-slider" id="simpleSlider"></div>
            <div class="slider-controls">
                <button class="slider-btn" id="prevSlide"><i class="fas fa-chevron-right"></i></button>
                <button class="slider-btn" id="nextSlide"><i class="fas fa-chevron-left"></i></button>
            </div>
            <div class="slider-indicators" id="sliderIndicators"></div>
        </section>
        
        <section class="offers-section hide-on-search">
            <h2 class="section-title">عروض مميزة</h2>
            <div class="offers-grid" id="offersGrid"></div>
        </section>
        
        <div class="search-results-container" id="searchResultsContainer">
            <div class="search-results-header">
                <h2 class="search-results-title">نتائج البحث</h2>
                <button class="clear-search-btn" id="clearSearchBtn"><i class="fas fa-times"></i> مسح البحث</button>
            </div>
            <div id="searchResultsList"></div>
        </div>
        
        <main class="hide-on-search">
            <h2 class="section-title">منتجاتنا</h2>
            <div id="product-list"></div>
        </main>

        <section class="location-section hide-on-search">
            <h2 class="section-title">موقعنا</h2>
            <div class="location-content">
                <div class="location-details">
                    <h3>فرع 6 أكتوبر</h3>
                    <p><i class="fas fa-map-marker-alt"></i>حدائق أكتوبر منطقة 390فدان سنتر الفردوس أمام الملعب </p>
                    <p><i class="fas fa-clock"></i><strong>ساعات العمل:</strong> يومياً 24 ساعة</p>
                    <p>عروضنا متوفرة كل جمعة من كل أسبوع</p>
                    <p>جميع الحقوق محفوظة لأسواق تبارك 2025</p>
              </div>
                <div class="location-map">
                    <div class="map-container">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.292968442386!2d31.003345077255545!3d29.94225063480985!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x145851003dcc9bef%3A0xc9ea5239f1d807db!2z2KfYs9mI2KfZgiDYqtio2KfYsdmD!5e0!3m2!1sar!2seg!4v1760059879807!5m2!1sar!2seg" allowfullscreen="" loading="lazy" title="موقع أسواق تبارك فرع 6 أكتوبر"></iframe>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="image-modal" class="modal">
        <span class="close-modal">&times;</span>
        <img class="modal-content" id="modal-img">
        <div id="caption"></div>
    </div>

    <div class="cart-icon" id="cartIcon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cartCount">0</span>
    </div>

    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>عربة التسوق</h3>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-footer">
            <div class="cart-total"><span>المجموع:</span><span id="cartTotal">0.00 جنيه</span></div>
            <div class="delivery-fee"><span>رسوم التوصيل:</span><span id="deliveryFee">10.00 جنيه</span></div>
            <div class="final-total"><span>الإجمالي:</span><span id="finalTotal">10.00 جنيه</span></div>
            <button class="checkout-btn" id="checkoutBtn">إرسال الطلبية</button>
        </div>
    </div>

    <div class="checkout-modal" id="checkoutModal">
        <div class="checkout-form">
            <span class="close-modal-btn" id="closeCheckoutModal">&times;</span>
            <h2>إتمام الطلب</h2>
            <form id="orderForm">
                <div class="form-group"><label for="customerName" class="required">اسم العميل</label><input type="text" id="customerName" name="customerName" required></div>
                <div class="form-group"><label for="customerPhone" class="required">رقم الموبايل</label><input type="tel" id="customerPhone" name="customerPhone" required></div>
                <div class="form-group"><label for="buildingNumber" class="required">رقم العمارة</label><input type="text" id="buildingNumber" name="buildingNumber" required></div>
                <div class="form-group"><label for="apartmentNumber" class="required">رقم الشقة</label><input type="text" id="apartmentNumber" name="apartmentNumber" required></div>
                <div class="form-group">
                    <label for="location" class="required">الموقع الجغرافي</label>
                    <input type="text" id="location" name="location" readonly required>
                    <button type="button" class="location-btn" id="getLocationBtn"><i class="fas fa-map-marker-alt"></i> احصل على موقعي الحالي</button>
                    <div class="location-status" id="locationStatus"></div>
                </div>
                <div class="form-group"><label for="landmark">علامة مميزة (اختياري)</label><input type="text" id="landmark" name="landmark"></div>
                <button type="submit" class="submit-order-btn">إرسال الطلبية</button>
            </form>
        </div>
    </div>

    <div class="success-message" id="successMessage">
        <h3>تم إرسال طلبك بنجاح!</h3>
        <p>سيتم التواصل معك قريباً لتأكيد الطلب.</p>
        <button id="closeSuccessMessage">حسناً</button>
    </div>

    <div class="visitor-counter" id="visitorCounter">
        <i class="fas fa-users"></i>
        <span id="visitorCount">0</span> زائر
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Visitor Counter Logic
            const visitorCounter = document.getElementById('visitorCounter');
            const visitorCount = document.getElementById('visitorCount');
            const hasVisitedBefore = localStorage.getItem('hasVisitedBefore');
            let totalVisitors = parseInt(localStorage.getItem('totalVisitors') || '0');
            if (!hasVisitedBefore) {
                totalVisitors++;
                localStorage.setItem('totalVisitors', totalVisitors.toString());
                localStorage.setItem('hasVisitedBefore', 'true');
            }
            visitorCount.textContent = totalVisitors;
            
            // Global variables
            let products = [];
            let cart = [];
            let currentSlide = 0;
            
            // DOM Elements
            const simpleSlider = document.getElementById('simpleSlider');
            const prevSlideBtn = document.getElementById('prevSlide');
            const nextSlideBtn = document.getElementById('nextSlide');
            const sliderIndicators = document.getElementById('sliderIndicators');
            const offersGrid = document.getElementById('offersGrid');
            const productList = document.getElementById('product-list');
            const searchInput = document.getElementById('search-input');
            const categoryFilter = document.getElementById('category-filter');
            const searchResultsContainer = document.getElementById('searchResultsContainer');
            const searchResultsList = document.getElementById('searchResultsList');
            const clearSearchBtn = document.getElementById('clearSearchBtn');
            const hideOnSearchElements = document.querySelectorAll('.hide-on-search');
            const cartIcon = document.getElementById('cartIcon');
            const cartSidebar = document.getElementById('cartSidebar');
            const closeCart = document.getElementById('closeCart');
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const cartTotal = document.getElementById('cartTotal');
            const deliveryFeeElement = document.getElementById('deliveryFee');
            const finalTotalElement = document.getElementById('finalTotal');
            const checkoutBtn = document.getElementById('checkoutBtn');
            const checkoutModal = document.getElementById('checkoutModal');
            const closeCheckoutModal = document.getElementById('closeCheckoutModal');
            const orderForm = document.getElementById('orderForm');
            const successMessage = document.getElementById('successMessage');
            const closeSuccessMessage = document.getElementById('closeSuccessMessage');
            const getLocationBtn = document.getElementById('getLocationBtn');
            const locationInput = document.getElementById('location');
            const locationStatus = document.getElementById('locationStatus');
            
            // Product data
            const allProducts = [
                { id: 1, name: "طبق بيض ابيض", newPrice: "159.00 جنيه", oldPrice: "170.00 جنيه", image: "https://cdn.metro-cc.ru/ru/ru_pim_195676001001_01.png", category: "ألبان وبيض", price: 159 },
                { id: 2, name: "طبق بيض احمر", newPrice: "165.00 جنيه", oldPrice: "175.00 جنيه", image: "https://avatars.mds.yandex.net/get-mpic/4614113/img_id4420346577537823307.jpeg/orig", category: "ألبان وبيض", price: 165 },
                { id: 3, name: "كيلو ارز وسط", newPrice: "23.00 جنيه/كجم", oldPrice: "28.00 جنيه/كجم", image: "https://yuz.uz/file/news/79cb22d40fd319ba06554c86a515c4c9.jpg", category: "عطارة وعلافة", price: 23 },
                { id: 4, name: "كيلو ارز عريض", newPrice: "28.00 جنيه/كجم", oldPrice: "32.00 جنيه/كجم", image: "https://avatars.mds.yandex.net/get-mpic/4547325/img_id7962333466218946176.jpeg/orig", category: "عطارة وعلافة", price: 28 },
                { id: 5, name: "شكارة ارز 25 كجم وسط", newPrice: "570.00 جنيه", oldPrice: "620.00 جنيه", image: "https://mir-s3-cdn-cf.behance.net/project_modules/hd/24432229385577.55f071518fbd7.jpg", category: "عطارة وعلافة", price: 570 },
                { id: 6, name: "شكارة ارز 25 كيلو عريض", newPrice: "675.00 جنيه", oldPrice: "740.00 جنيه", image: "https://mir-s3-cdn-cf.behance.net/project_modules/hd/24432229385577.55f071518fbd7.jpg", category: "عطارة وعلافة", price: 675 },
                { id: 7, name: "كيلو مكرونة انواع ماعدا الاسباجيتى", newPrice: "20.00 جنيه", oldPrice: "24.00 جنيه", image: "https://cdn-uz.kursiv.media/wp-content/uploads/2024/08/scale_1200-16.jpg", category: "عطارة وعلافة", price: 20 },
                { id: 8, name: "2 كيلو سكر وزن 1000جم صافى", newPrice: "58.00 جنيه", oldPrice: "70.00 جنيه", image: "https://www2.0zz0.com/2025/10/10/02/865311217.png", category: "عطارة وعلافة", price: 58 },
                { id: 9, name: "شكارة مكرونة اى نوع ماعدا الاسباجيتى ", newPrice: "195.00 جنيه", oldPrice: "220.00 جنيه", image: "https://cdn-uz.kursiv.media/wp-content/uploads/2024/08/scale_1200-16.jpg", category: "عطارة وعلافة", price: 195 },
                { id: 10, name: "2 زيت سندباد", newPrice: "105.00 جنيه", oldPrice: "130.00 جنيه", image: "https://lana.gov.ly/images/src/215410.jpg", category: "سمن وزيوت", price: 105 },
                { id: 11, name: "كيلو سمن سايب روابى-جنه-كريستال", newPrice: "100.00 جنيه", oldPrice: "120.00 جنيه", image: "https://akm-img-a-in.tosshub.com/indiatoday/images/story/201911/ghee.png", category: "سمن وزيوت", price: 100 },
                { id: 12, name: "2 كيلو دقيق سايب", newPrice: "35.00 جنيه", oldPrice: "40.00 جنيه", image: "https://avatars.mds.yandex.net/get-mpic/5284145/img_id1750820196963638749.jpeg/orig", category: "عطارة وعلافة", price: 35 },
                { id: 13, name: "كيلو عسل اسمر", newPrice: "38.00 جنيه", oldPrice: "45.00 جنيه", image: "https://img.diytrade.com/smimg/2935125/49070690-11280215-0/Molasses_sugar_cane/8445.jpg", category: "عطارة وعلافة", price: 38 },
                { id: 14, name: "كيلو طحينة سايب", newPrice: "120.00 جنيه", oldPrice: "160.00 جنيه", image: "https://img.kompass.com/sys-master-images/h9d/h04/9151179620382/tahini-hss-jpg", category: "عطارة وعلافة", price: 120 },
                { id: 15, name: "باكت ملح بونو", newPrice: "35.00 جنيه", oldPrice: "48.00 جنيه", image: "https://www2.0zz0.com/2025/10/10/02/606345585.jpg", category: "عطارة وعلافة", price: 35 },
                { id: 16, name: "3 خل العزة", newPrice: "25.00 جنيه", oldPrice: "30.00 جنيه", image: "https://m.media-amazon.com/images/S/aplus-media/sota/43272024-50ec-492b-ac71-fe8e028d2159.__CR0,0,970,600_PT0_SX970_V1___.jpg", category: "ماركت", price: 25 },
                { id: 17, name: "5 كيس مكرونة غالية مشكل", newPrice: "50.00 جنيه", oldPrice: "60.00 جنيه", image: "https://m.media-amazon.com/images/I/618Kej3if1L._AC_UF1000,1000_QL80_.jpg", category: "ماركت", price: 50 },
                { id: 18, name: "كيلو مخلل بوليف", newPrice: "20.00 جنيه", oldPrice: "30.00 جنيه", image: "https://i.ytimg.com/vi/Y2_CtbPh3Es/maxresdefault.jpg", category: "مخللات", price: 20 },
                { id: 19, name: "5 كيس مكرونة الملكة مشكل", newPrice: "69.00 جنيه", oldPrice: "75.00 جنيه", image: "https://i1.sndcdn.com/artworks-czylEj2FpnwIX9xD-K9X77w-t500x500.jpg", category: "ماركت", price: 69 },
                { id: 20, name: "برجر حلوانى عائلى 25 ق", newPrice: "205.00 جنيه", oldPrice: "220.00 جنيه", image: "https://www2.0zz0.com/2025/09/26/01/864482321.jpg", category: "لحوم ومجمدات", price: 205 },
                { id: 21, name: "برجر المراعى عائلى 25 ق", newPrice: "115.00 جنيه", oldPrice: "125.00 جنيه", image: "https://www2.0zz0.com/2025/09/26/01/478227720.jpg", category: "لحوم ومجمدات", price: 115 },
                { id: 22, name: "برجر توابل شرقية عائلى 25 ق", newPrice: "125.00 جنيه", oldPrice: "135.00 جنيه", image: "https://www2.0zz0.com/2025/09/26/01/532428282.jpg", category: "لحوم ومجمدات", price: 125 },
                { id: 23, name: "كيلو رنجة درجة أولى", newPrice: "115.00 جنيه/كجم", oldPrice: "140.00 جنيه/كجم", image: "https://ychef.files.bbci.co.uk/976x549/p04xs9bl.jpg0", category: "لحوم ومجمدات", price: 115 },
                { id: 24, name: "زجاجة زيت حلوة- قلية 5 لتر", newPrice: "315.00 جنيه", oldPrice: "330.00 جنيه", image: "https://ashiae-bucket.s3.eu-west-3.amazonaws.com/products/6521-ex-0.jpg", category: "سمن وزيوت", price: 315 },
                { id: 25, name: "علبة ماجى شريط قلب احمر", newPrice: "39.00 جنيه", oldPrice: "48.00 جنيه", image: "https://gomla-eg.com/image/cache/catalog/products/655.png-550x550w.png.webp", category: "ماركت", price: 39 },
                { id: 26, name: "2 علبة صلصة صفيح دهشة", newPrice: "50.00 جنيه", oldPrice: "70.00 جنيه", image: "https://images.freshop.com/00024000013723/336ed2e97ca1a8ff47d459c3a1b062c4_large.png", category: "ماركت", price: 50 },
                { id: 27, name: "2 علبة صلصة برطمان دهشة", newPrice: "35.00 جنيه", oldPrice: "40.00 جنيه", image: "https://www2.0zz0.com/2025/10/10/02/974509974.jpg", category: "ماركت", price: 35 },
                { id: 28, name: "زيت هنادى 2.5 لتر", newPrice: "150.00 جنيه", oldPrice: "160.00 جنيه", image: "https://i.pinimg.com/236x/a6/fd/44/a6fd4456e37323d17a042f4d231fb4e1.jpg?nii=t", category: "سمن وزيوت", price: 150 },
                { id: 29, name: "كيلو جبنة ثلاجة", newPrice: "120.00 جنيه/كجم", oldPrice: "140.00 جنيه/كجم", image: "https://i.pinimg.com/736x/73/6f/8f/736f8fb118ca449d576f26b3a319da79.jpg", category: "ألبان وبيض", price: 120 },
                { id: 30, name: "كيلو جبنة براملى سادة-مزبدة-فلفل", newPrice: "160.00 جنيه/كجم", oldPrice: "180.00 جنيه/كجم", image: "https://avatars.dzeninfra.ru/get-zen_doc/3901320/pub_6209e776279dc141916f0754_6209eb7cf978a974ec4a23c2/scale_1200", category: "ألبان وبيض", price: 160 },
                { id: 31, name: "كيلو حلاوة سايبة ممتازة", newPrice: "120.00 جنيه/كجم", oldPrice: "140.00 جنيه/كجم", image: "https://e498h76z5mp.exactdn.com/wp-content/uploads/2020/11/sesame-halva-scaled.jpg", category: "عطارة وعلافة", price: 120 },
                { id: 32, name: "3 علبة تونة", newPrice: "75.00 جنيه", oldPrice: "90.00 جنيه", image: "https://m.media-amazon.com/images/I/81OI18KZr+L._AC_UL1200_QL65_.jpg", category: "ماركت", price: 75 },
                { id: 33, name: "باكت ارز 10كجم الخير والبركة", newPrice: "245.00 جنيه", oldPrice: "260.00 جنيه", image: "https://mir-s3-cdn-cf.behance.net/project_modules/hd/24432229385577.55f071518fbd7.jpg", category: "عطارة وعلافة", price: 245 },
                { id: 34, name: "2 ارز الخير والبركة", newPrice: "52.00 جنيه", oldPrice: "60.00 جنيه", image: "https://www2.0zz0.com/2025/10/10/02/196820438.jpg", category: "عطارة وعلافة", price: 52 },
                { id: 35, name: "كيلو كاتشب حار-بارد", newPrice: "40.00 جنيه", oldPrice: "50.00 جنيه", image: "https://faragalla.com/wp-content/uploads/2019/09/DSC_1883.jpg", category: "عطارة وعلافة", price: 40 },
                { id: 36, name: "2 زيت سهر لتر", newPrice: "130.00 جنيه", oldPrice: "140.00 جنيه", image: "https://m.media-amazon.com/images/I/61JJAIPAjnL.jpg", category: "سمن وزيوت", price: 130 },
                { id: 37, name: "2 زيت سهر 700 جرام", newPrice: "95.00 جنيه", oldPrice: "110.00 جنيه", image: "https://www2.0zz0.com/2025/10/10/02/423777303.jpg", category: "سمن وزيوت", price: 95 },
                { id: 38, name: "زيت قلية لتر صافى", newPrice: "75.00 جنيه", oldPrice: "80.00 جنيه", image: "https://m.media-amazon.com/images/I/61JJAIPAjnL.jpg", category: "سمن وزيوت", price: 75 },
                { id: 39, name: "زيت قلية 700جرام", newPrice: "55.00 جنيه", oldPrice: "60.00 جنيه", image: "https://www2.0zz0.com/2025/09/26/02/438357989.jpg", category: "سمن وزيوت", price: 55 }
            ];

            // Initialize products
            products = [...allProducts];
            
            // Initialize functions
            function initSimpleSlider() {
                const sliderData = [
                    { title: 'طبق بيض ابيض', description: 'أجود أنواع البيض بأسعار مميزة', image: 'https://cdn.metro-cc.ru/ru/ru_pim_195676001001_01.png', oldPrice: '170.00 جنيه', newPrice: '159.00 جنيه', badge: 'خصم 6%' },
                    { title: 'كيلو ارز وسط', description: 'أرز وسط عالي الجودة', image: 'https://yuz.uz/file/news/79cb22d40fd319ba06554c86a515c4c9.jpg', oldPrice: '28.00 جنيه/كجم', newPrice: '23.00 جنيه/كجم', badge: 'خصم 18%' },
                    { title: '2 زيت سندباد', description: 'زيت سندباد الأصلي بأسعار تنافسية', image: 'https://lana.gov.ly/images/src/215410.jpg', oldPrice: '130.00 جنيه', newPrice: '105.00 جنيه', badge: 'خصم 19%' }
                ];
                
                function renderSlider() {
                    simpleSlider.innerHTML = '';
                    sliderIndicators.innerHTML = '';
                    
                    sliderData.forEach((slide, index) => {
                        const slideDiv = document.createElement('div');
                        slideDiv.className = `slide ${index === 0 ? 'active' : ''}`;
                        slideDiv.innerHTML = `
                            <div class="slide-content">
                                <div class="slide-image">
                                    <img src="${slide.image}" alt="${slide.title}">
                                    <div class="slide-badge">${slide.badge}</div>
                                </div>
                                <div class="slide-info">
                                    <h2 class="slide-title">${slide.title}</h2>
                                    <p class="slide-description">${slide.description}</p>
                                    <div class="slide-price">
                                        <span class="slide-new-price">${slide.newPrice}</span>
                                        <span class="slide-old-price">${slide.oldPrice}</span>
                                    </div>
                                    <button class="slide-cta">اطلب الآن</button>
                                </div>
                            </div>
                        `;
                        simpleSlider.appendChild(slideDiv);
                        
                        const indicator = document.createElement('div');
                        indicator.className = `indicator ${index === 0 ? 'active' : ''}`;
                        indicator.addEventListener('click', () => {
                            showSlide(index);
                        });
                        sliderIndicators.appendChild(indicator);
                    });
                }
                
                function showSlide(index) {
                    const slides = document.querySelectorAll('.slide');
                    const indicators = document.querySelectorAll('.indicator');
                    
                    slides.forEach(slide => slide.classList.remove('active'));
                    indicators.forEach(indicator => indicator.classList.remove('active'));
                    
                    slides[index].classList.add('active');
                    indicators[index].classList.add('active');
                    
                    currentSlide = index;
                }
                
                function nextSlide() {
                    currentSlide = (currentSlide + 1) % sliderData.length;
                    showSlide(currentSlide);
                }
                
                function prevSlide() {
                    currentSlide = (currentSlide - 1 + sliderData.length) % sliderData.length;
                    showSlide(currentSlide);
                }
                
                renderSlider();
                setInterval(nextSlide, 5000);
                
                prevSlideBtn.addEventListener('click', prevSlide);
                nextSlideBtn.addEventListener('click', nextSlide);
            }
            
            function initProductList() {
                let filteredProducts = [...products];
                let categories = ['الكل'];
                
                // Extract unique categories
                products.forEach(product => {
                    if (!categories.includes(product.category)) {
                        categories.push(product.category);
                    }
                });
                
                // Render category filter buttons
                function renderCategoryFilter() {
                    categoryFilter.innerHTML = '';
                    categories.forEach(category => {
                        const button = document.createElement('button');
                        button.className = 'filter-btn';
                        button.textContent = category;
                        if (category === 'الكل') {
                            button.classList.add('active');
                        }
                        button.addEventListener('click', () => {
                            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                            button.classList.add('active');
                            
                            if (category === 'الكل') {
                                filteredProducts = [...products];
                            } else {
                                filteredProducts = products.filter(product => product.category === category);
                            }
                            renderProducts();
                        });
                        categoryFilter.appendChild(button);
                    });
                }
                
                // Render products
                function renderProducts() {
                    productList.innerHTML = '';
                    filteredProducts.forEach(product => {
                        const productCard = document.createElement('div');
                        productCard.className = 'product-card';
                        productCard.innerHTML = `
                            <img src="${product.image}" alt="${product.name}" class="product-image">
                            <div class="product-info">
                                <h3>${product.name}</h3>
                                <div class="price">
                                    ${product.oldPrice ? `<span class="old-price">${product.oldPrice}</span>` : ''}
                                    <span class="new-price">${product.newPrice}</span>
                                </div>
                                <button class="add-to-cart-btn" data-id="${product.id}">أضف للسلة</button>
                            </div>
                        `;
                        productList.appendChild(productCard);
                    });
                    
                    // Add event listeners to "Add to Cart" buttons
                    document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                        button.addEventListener('click', (e) => {
                            const productId = parseInt(e.target.getAttribute('data-id'));
                            addToCart(productId);
                        });
                    });
                }
                
                renderCategoryFilter();
                renderProducts();
            }
            
            function initCategoryFilter() {
                // This is handled in initProductList
            }
            
            function initSearch() {
                searchInput.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.toLowerCase().trim();
                    
                    if (searchTerm) {
                        searchResultsContainer.classList.add('active');
                        hideOnSearchElements.forEach(element => { element.style.display = 'none'; });
                        
                        const searchResults = products.filter(product => 
                            product.name.toLowerCase().includes(searchTerm) ||
                            product.category.toLowerCase().includes(searchTerm)
                        );
                        
                        renderSearchResults(searchResults);
                    } else {
                        searchResultsContainer.classList.remove('active');
                        hideOnSearchElements.forEach(element => { element.style.display = ''; });
                    }
                });
                
                clearSearchBtn.addEventListener('click', () => {
                    searchInput.value = '';
                    searchResultsContainer.classList.remove('active');
                    hideOnSearchElements.forEach(element => { element.style.display = ''; });
                });
                
                function renderSearchResults(results) {
                    searchResultsList.innerHTML = '';
                    
                    if (results.length === 0) {
                        searchResultsList.innerHTML = '<div class="no-results">لم يتم العثور على نتائج</div>';
                        return;
                    }
                    
                    results.forEach(product => {
                        const productCard = document.createElement('div');
                        productCard.className = 'product-card';
                        productCard.innerHTML = `
                            <img src="${product.image}" alt="${product.name}" class="product-image">
                            <div class="product-info">
                                <h3>${product.name}</h3>
                                <div class="price">
                                    ${product.oldPrice ? `<span class="old-price">${product.oldPrice}</span>` : ''}
                                    <span class="new-price">${product.newPrice}</span>
                                </div>
                                <button class="add-to-cart-btn" data-id="${product.id}">أضف للسلة</button>
                            </div>
                        `;
                        searchResultsList.appendChild(productCard);
                    });
                    
                    // Add event listeners to "Add to Cart" buttons in search results
                    document.querySelectorAll('#searchResultsList .add-to-cart-btn').forEach(button => {
                        button.addEventListener('click', (e) => {
                            const productId = parseInt(e.target.getAttribute('data-id'));
                            addToCart(productId);
                        });
                    });
                }
            }
            
            // Cart functions
            function loadCart() {
                const savedCart = localStorage.getItem('tabarekCart');
                if (savedCart) {
                    cart = JSON.parse(savedCart);
                    updateCartUI();
                }
            }
            
            function saveCart() {
                localStorage.setItem('tabarekCart', JSON.stringify(cart));
            }
            
            function addToCart(productId) {
                const product = products.find(p => p.id === productId);
                if (product) {
                    const existingItem = cart.find(item => item.id === productId);
                    
                    if (existingItem) {
                        existingItem.quantity++;
                    } else {
                        cart.push({ ...product, quantity: 1 });
                    }
                    
                    saveCart();
                    updateCartUI();
                    
                    // Show notification
                    showNotification('تمت إضافة المنتج إلى السلة');
                }
            }
            
            function updateCartUI() {
                cartItems.innerHTML = '';
                let total = 0;
                let itemCount = 0;
                
                cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <img src="${item.image}" alt="${item.name}">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${item.newPrice}</div>
                        </div>
                        <div class="quantity-controls">
                            <button class="quantity-btn decrease-quantity" data-id="${item.id}">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn increase-quantity" data-id="${item.id}">+</button>
                        </div>
                    `;
                    cartItems.appendChild(cartItem);
                    
                    total += item.price * item.quantity;
                    itemCount += item.quantity;
                });
                
                cartCount.textContent = itemCount;
                
                const delivery = 10.00;
                const final = total + delivery;
                
                cartTotal.textContent = `${total.toFixed(2)} جنيه`;
                deliveryFeeElement.textContent = `${delivery.toFixed(2)} جنيه`;
                finalTotalElement.textContent = `${final.toFixed(2)} جنيه`;
                
                // Add event listeners to quantity buttons
                document.querySelectorAll('.decrease-quantity').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = parseInt(e.target.getAttribute('data-id'));
                        updateQuantity(productId, -1);
                    });
                });
                
                document.querySelectorAll('.increase-quantity').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = parseInt(e.target.getAttribute('data-id'));
                        updateQuantity(productId, 1);
                    });
                });
            }
            
            function updateQuantity(productId, change) {
                const item = cart.find(item => item.id === productId);
                if (item) {
                    item.quantity += change;
                    
                    if (item.quantity <= 0) {
                        cart = cart.filter(item => item.id !== productId);
                    }
                    
                    saveCart();
                    updateCartUI();
                }
            }
            
            function showNotification(message) {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.textContent = message;
                notification.style.cssText = `
                    position: fixed;
                    bottom: 100px;
                    left: 50%;
                    transform: translateX(-50%);
                    background-color: #4CAF50;
                    color: white;
                    padding: 10px 20px;
                    border-radius: 5px;
                    z-index: 1000;
                    font-weight: bold;
                `;
                
                document.body.appendChild(notification);
                
                // Remove notification after 3 seconds
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
            
            function getUserLocation() {
                if (navigator.geolocation) {
                    locationStatus.textContent = 'جاري تحديد موقعك...';
                    locationStatus.className = 'location-status';
                    
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const { latitude, longitude } = position.coords;
                            locationInput.value = `${latitude.toFixed(6)}, ${longitude.toFixed(6)}`;
                            locationStatus.textContent = 'تم تحديد موقعك بنجاح';
                            locationStatus.className = 'location-status success';
                        },
                        (error) => {
                            locationStatus.textContent = 'فشل في تحديد موقعك. يرجى إدخال الموقع يدوياً.';
                            locationStatus.className = 'location-status error';
                        }
                    );
                } else {
                    locationStatus.textContent = 'المتصفح الخاص بك لا يدعم تحديد الموقع.';
                    locationStatus.className = 'location-status error';
                }
            }
            
            function submitOrder(e) {
                e.preventDefault();
                
                // Get form data
                const formData = new FormData(orderForm);
                const orderData = {
                    customer: {
                        name: formData.get('customerName'),
                        phone: formData.get('customerPhone'),
                        buildingNumber: formData.get('buildingNumber'),
                        apartmentNumber: formData.get('apartmentNumber'),
                        location: formData.get('location'),
                        landmark: formData.get('landmark')
                    },
                    items: cart,
                    total: cartTotal.textContent,
                    deliveryFee: deliveryFeeElement.textContent,
                    finalTotal: finalTotalElement.textContent
                };
                
                // Create WhatsApp message with order details
                let message = `طلب جديد من ${orderData.customer.name}\n\n`;
                message += `رقم الهاتف: ${orderData.customer.phone}\n`;
                message += `العنوان: عمارة ${orderData.customer.buildingNumber}، شقة ${orderData.customer.apartmentNumber}\n`;
                message += `الموقع: ${orderData.customer.location}\n`;
                if (orderData.customer.landmark) {
                    message += `علامة مميزة: ${orderData.customer.landmark}\n`;
                }
                message += `\nالمنتجات:\n`;
                
                cart.forEach(item => {
                    message += `- ${item.name} × ${item.quantity} = ${(item.price * item.quantity).toFixed(2)} جنيه\n`;
                });
                
                message += `\n${orderData.total}\n`;
                message += `رسوم التوصيل: ${orderData.deliveryFee}\n`;
                message += `الإجمالي: ${orderData.finalTotal}`;
                
                // WhatsApp numbers to send the order to
                const whatsappNumbers = [
                    '201030566078',
                    '201118091234',
                    '201095348285'
                ];
                
                // Send the order to all WhatsApp numbers
                whatsappNumbers.forEach(number => {
                    window.open(`https://wa.me/${number}?text=${encodeURIComponent(message)}`, '_blank');
                });
                
                // Close checkout modal
                checkoutModal.classList.remove('active');
                
                // Show success message
                successMessage.classList.add('active');
                
                // Clear cart
                cart = [];
                saveCart();
                updateCartUI();
                
                // Reset form
                orderForm.reset();
            }
            
            // Image Modal
            const modal = document.getElementById('image-modal');
            const modalImg = document.getElementById('modal-img');
            const caption = document.getElementById('caption');
            const closeModal = document.querySelector('.close-modal');
            
            // Add click event to all product images
            document.addEventListener('click', function(e) {
                if (e.target.tagName === 'IMG' && e.target.closest('.product-card, .slide-image, .offer-card-image')) {
                    modal.style.display = 'block';
                    modalImg.src = e.target.src;
                    caption.textContent = e.target.alt;
                }
            });
            
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // Close modal when clicking outside of it
            window.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Initialize offers
            function initOffers() {
                const offersData = [
                    { title: 'طبق بيض ابيض', image: 'https://cdn.metro-cc.ru/ru/ru_pim_195676001001_01.png', oldPrice: '170.00 جنيه', newPrice: '159.00 جنيه', badge: 'خصم 6%' },
                    { title: 'كيلو ارز وسط', image: 'https://yuz.uz/file/news/79cb22d40fd319ba06554c86a515c4c9.jpg', oldPrice: '28.00 جنيه/كجم', newPrice: '23.00 جنيه/كجم', badge: 'خصم 18%' },
                    { title: '2 زيت سندباد', image: 'https://lana.gov.ly/images/src/215410.jpg', oldPrice: '130.00 جنيه', newPrice: '105.00 جنيه', badge: 'خصم 19%' },
                    { title: '3 علبة تونة', image: 'https://m.media-amazon.com/images/I/81OI18KZr+L._AC_UL1200_QL65_.jpg', oldPrice: '90.00 جنيه', newPrice: '75.00 جنيه', badge: 'خصم 17%' }
                ];
                
                function renderOffers() {
                    offersGrid.innerHTML = '';
                    offersData.forEach(offer => {
                        const offerCard = document.createElement('div');
                        offerCard.className = 'offer-card';
                        offerCard.innerHTML = `
                            <div class="offer-card-image">
                                <img src="${offer.image}" alt="${offer.title}">
                                <div class="offer-card-badge">${offer.badge}</div>
                            </div>
                            <div class="offer-card-content">
                                <h3 class="offer-card-title">${offer.title}</h3>
                                <div class="offer-card-price">
                                    <span class="offer-card-old-price">${offer.oldPrice}</span>
                                    <span class="offer-card-new-price">${offer.newPrice}</span>
                                </div>
                                <button class="offer-card-btn">اطلب الآن</button>
                            </div>
                        `;
                        offersGrid.appendChild(offerCard);
                    });
                }
                
                renderOffers();
            }
            
            // Event listeners
            cartIcon.addEventListener('click', () => {
                cartSidebar.classList.add('active');
            });
            
            closeCart.addEventListener('click', () => {
                cartSidebar.classList.remove('active');
            });
            
            checkoutBtn.addEventListener('click', () => {
                if (cart.length === 0) {
                    alert('عربة التسوق فارغة!');
                    return;
                }
                
                checkoutModal.classList.add('active');
            });
            
            closeCheckoutModal.addEventListener('click', () => {
                checkoutModal.classList.remove('active');
            });
            
            closeSuccessMessage.addEventListener('click', () => {
                successMessage.classList.remove('active');
            });
            
            getLocationBtn.addEventListener('click', getUserLocation);
            
            orderForm.addEventListener('submit', submitOrder);
            
            // Initialize everything
            initSimpleSlider();
            initProductList();
            initCategoryFilter();
            initSearch();
            initOffers();
            loadCart();
        });
    </script>
</body>
</html>
