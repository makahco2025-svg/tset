<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>عروض أسواق تبارك</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root {
            --primary-color: #dc3545; /* Red */
            --primary-color-dark: #a71d2a; /* Darker Red */
            --secondary-color: #6c757d;
            --background-color: #f4f6f9;
            --card-background: #ffffff;
            --text-color: #333;
            --heading-color: #c82333; /* Heading Red */
            --shadow: 0 5px 15px rgba(0,0,0,0.08);
            --gold-color: #ffc107;
        }
        body {
            font-family: 'Tajawal', 'Segoe UI', Tahoma, sans-serif;
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            background-image: url('https://images.unsplash.com/photo-1583258292688-d0213dc5a3a8?w=1200&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
            padding-top: 260px; /* Increased space for announcement bar and search section */
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(244, 246, 249, 0.92);
            z-index: -1;
        }
        
        /* Professional Announcement Bar */
        .announcement-bar {
            background: linear-gradient(135deg, #dc3545 0%, #a71d2a 100%);
            color: white;
            padding: 12px 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 3000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .announcement-left {
            display: flex;
            align-items: center;
            padding: 0 20px;
        }
        
        .announcement-logo {
            width: 40px;
            height: 40px;
            margin-left: 15px;
            filter: brightness(0) invert(1);
        }
        
        .announcement-text {
            font-weight: 700;
            font-size: 1.2em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        
        .announcement-right {
            display: flex;
            align-items: center;
            padding: 0 20px;
        }
        
        .announcement-links {
            display: flex;
            gap: 15px;
        }
        
        .announcement-link {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
            padding: 5px 10px;
            border-radius: 20px;
            background-color: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }
        
        .announcement-link:hover {
            background-color: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        
        .announcement-badge {
            background-color: var(--gold-color);
            color: #333;
            font-size: 0.8em;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: bold;
            margin-right: 5px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .secondary-announcement-bar {
            background: linear-gradient(90deg, rgba(255,193,7,0.9) 0%, rgba(255,152,0,0.9) 100%);
            color: #333;
            text-align: center;
            padding: 12px 0;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 0;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .secondary-announcement-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            20% { left: 100%; }
            100% { left: 100%; }
        }

        /* Search and Filter Container - Moved to top with increased gap from announcement bar */
        .controls-container {
            position: fixed;
            top: 85px; /* Increased gap from announcement bar from 65px to 85px */
            left: 0;
            right: 0;
            z-index: 2500;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: saturate(180%) blur(10px);
            -webkit-backdrop-filter: saturate(180%) blur(10px);
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: top 0.3s ease-in-out;
        }
        
        .controls-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        #search-container {
            margin-bottom: 25px; /* Reduced margin between search and category filter from 45px to 25px */
            position: relative;
        }

        #search-input {
            width: 100%;
            padding: 12px 40px 12px 20px;
            font-size: 1.1em;
            border: 1px solid #ddd;
            border-radius: 25px;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        #search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        #search-container .fa-search {
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            color: #aaa;
        }

        /* Category Filter */
        #category-filter {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .filter-btn {
            padding: 8px 18px;
            font-size: 1em;
            font-family: inherit;
            border: 1px solid var(--primary-color);
            background-color: transparent;
            color: var(--primary-color);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
        }
        .filter-btn:hover,
        .filter-btn.active {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.85) 0%, rgba(167, 29, 42, 0.95) 100%), url('https://images.unsplash.com/photo-1542838132-92c53300491e?w=1200&q=80') no-repeat center center/cover;
            color: white;
            padding: 40px 20px;
            border-radius: 0 0 15px 15px;
            text-align: center;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }
        header h1 {
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-size: 2.5em;
            margin: 0 0 20px 0;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        .logo {
            width: 60px;
            height: 60px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }
        .contact-info {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            font-size: 1.1em;
        }
        .contact-info a, .contact-info span {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }
        .contact-info a:hover {
            opacity: 0.8;
        }
        .contact-info i {
            margin-left: 8px;
        }

        /* Section Title */
        .section-title {
            text-align: center;
            font-size: 2em;
            color: var(--heading-color);
            margin-bottom: 30px;
            position: relative;
        }
        .section-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 3px;
            background-color: var(--primary-color);
            margin: 8px auto 0;
        }

        /* Simple and Reliable Slider Styles */
        .slider-section {
            margin: 40px 0;
            position: relative;
        }
        
        .simple-slider {
            position: relative;
            width: 100%;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            background: #fff;
        }
        
        .slide {
            display: none;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%);
        }
        
        .slide.active {
            display: flex;
            align-items: center;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .slide-content {
            display: flex;
            width: 100%;
            align-items: center;
            gap: 30px;
        }
        
        .slide-image {
            flex: 1;
            max-width: 40%;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .slide-image img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .slide-image:hover img {
            transform: scale(1.05);
        }
        
        .slide-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 2;
        }
        
        .slide-info {
            flex: 1;
            padding: 20px;
        }
        
        .slide-title {
            font-size: 2em;
            color: var(--primary-color);
            margin: 0 0 15px 0;
            font-weight: bold;
        }
        
        .slide-description {
            font-size: 1.1em;
            color: var(--text-color);
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .slide-price {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .slide-new-price {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .slide-old-price {
            font-size: 1.2em;
            color: var(--secondary-color);
            text-decoration: line-through;
        }
        
        .slide-cta {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 1.1em;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
            border: none;
            cursor: pointer;
        }
        
        .slide-cta:hover {
            background: var(--primary-color-dark);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(220, 53, 69, 0.4);
        }
        
        .slider-controls {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 10;
        }
        
        .slider-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-size: 1.2em;
            color: var(--primary-color);
        }
        
        .slider-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.1);
        }
        
        .slider-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .indicator.active {
            background: var(--primary-color);
            width: 30px;
            border-radius: 6px;
        }
        
        /* Special Offers Grid */
        .offers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .offer-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .offer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .offer-card-image {
            height: 180px;
            overflow: hidden;
            position: relative;
        }
        
        .offer-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .offer-card:hover .offer-card-image img {
            transform: scale(1.1);
        }
        
        .offer-card-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .offer-card-content {
            padding: 15px;
            text-align: center;
        }
        
        .offer-card-title {
            font-size: 1.1em;
            margin: 0 0 10px 0;
            color: var(--text-color);
        }
        
        .offer-card-price {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .offer-card-new-price {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .offer-card-old-price {
            font-size: 1em;
            color: var(--secondary-color);
            text-decoration: line-through;
        }
        
        .offer-card-btn {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .offer-card-btn:hover {
            background: var(--primary-color-dark);
            transform: translateY(-2px);
        }

        /* Visitor Counter Styles */
        .visitor-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            font-weight: bold;
        }
        
        .visitor-counter i {
            font-size: 1.2em;
        }

        #product-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        .product-card {
            background-color: var(--card-background);
            border: 1px solid #eee;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform .2s ease, box-shadow .2s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            cursor: pointer;
        }
        .product-info {
            padding: 20px;
            text-align: center;
            flex-grow: 1;
        }
        .product-info h3 {
            margin: 0 0 10px 0;
            color: var(--text-color);
        }
        .product-info .price {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--primary-color);
        }
        .product-info .new-price {
             font-size: 1.3em;
        }

        /* Location Section */
        .location-section {
            background-color: var(--card-background);
            padding: 40px;
            margin-top: 40px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        .location-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            align-items: center;
        }
        .location-details, .location-map {
            flex: 1;
            min-width: 300px;
        }
        .location-details {
            text-align: right;
        }
        .location-details h3 {
             font-size: 1.5em;
             color: var(--text-color);
             margin-bottom: 15px;
        }
        .location-details p {
            font-size: 1.1em;
            line-height: 1.8;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }
        .location-details i {
            color: var(--primary-color);
            margin-left: 10px;
        }
        .map-container {
            position: relative;
            overflow: hidden;
            padding-top: 75%; /* More square-like ratio */
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .map-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        /* Modal (Lightbox) Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            padding-top: 60px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
        }
        .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            animation-name: zoom;
            animation-duration: 0.6s;
        }
        @keyframes zoom {
            from {transform:scale(0)} 
            to {transform:scale(1)}
        }
        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            font-size: 1.2em;
        }
        .close-modal {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }
        .close-modal:hover,
        .close-modal:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
        
        /* Search Results Container */
        .search-results-container {
            display: none;
            padding: 20px 0;
            margin-top: 20px;
        }
        
        .search-results-container.active {
            display: block;
        }
        
        .search-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .search-results-title {
            font-size: 1.5em;
            color: var(--heading-color);
            margin: 0;
        }
        
        .clear-search-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .clear-search-btn:hover {
            background-color: #5a6268;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: var(--secondary-color);
            font-size: 1.2em;
        }
        
        /* Elements to hide during search */
        .hide-on-search {
            transition: opacity 0.3s ease;
        }
        
        /* Responsive Styles */
        @media (max-width: 992px) {
            .slide-content {
                flex-direction: column;
            }
            
            .slide-image {
                max-width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .location-content { flex-direction: column; }
            .location-details { text-align: center; margin-bottom: 20px; }
            
            .announcement-bar {
                flex-direction: column;
                padding: 10px 0;
            }
            
            .announcement-left, .announcement-right {
                padding: 5px 20px;
            }
            
            .announcement-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .slide {
                padding: 20px;
            }
            
            .slide-title {
                font-size: 1.5em;
            }
            
            .slide-new-price {
                font-size: 1.4em;
            }
            
            .controls-container {
                top: 145px; /* Increased gap for mobile from 125px to 145px */
            }
            
            #search-container {
                margin-bottom: 25px; /* Reduced margin for mobile - set to 25px */
            }
        }
        
        @media (max-width: 576px) {
            .announcement-text { font-size: 1em; }
            body { padding-top: 270px; } /* Increased to accommodate larger gap */
            .controls-container { top: 205px; } /* Increased gap for small screens from 185px to 205px */
            
            #search-container {
                margin-bottom: 25px; /* Set to 25px for small screens */
            }
            
            .visitor-counter {
                bottom: 90px; /* Adjust position to not overlap with cart icon */
                right: 20px;
                font-size: 0.9em;
            }
            
            .slider-btn {
                width: 40px;
                height: 40px;
                font-size: 1em;
            }
        }

        /* Shopping Cart Styles - Updated Position */
        .cart-icon {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            transition: transform 0.3s;
        }

        .cart-icon:hover {
            transform: scale(1.1);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ffc107;
            color: #333;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            z-index: 2000;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.active {
            right: 0;
        }

        .cart-header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .cart-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
            margin-left: 15px;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--primary-color);
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 5px;
        }

        .cart-footer {
            padding: 20px;
            border-top: 1px solid #eee;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .delivery-fee {
            display: flex;
            justify-content: space-between;
            font-size: 1em;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }

        .final-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .checkout-btn {
            width: 100%;
            padding: 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background 0.3s;
        }

        .checkout-btn:hover {
            background: var(--primary-color-dark);
        }

        .close-cart {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        /* Checkout Form Styles */
        .checkout-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        .checkout-modal.active {
            display: flex;
        }

        .checkout-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .checkout-form h2 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group label.required::after {
            content: " *";
            color: red;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .submit-order-btn {
            width: 100%;
            padding: 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-order-btn:hover {
            background: var(--primary-color-dark);
        }

        .close-modal-btn {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        /* Success Message Styles */
        .success-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 4000;
            text-align: center;
        }

        .success-message.active {
            display: block;
        }

        .success-message h3 {
            color: #28a745;
            margin-bottom: 15px;
        }

        .success-message p {
            margin-bottom: 20px;
        }

        .success-message button {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .add-to-cart-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        
        .add-to-cart-btn:hover {
            background-color: var(--primary-color-dark);
        }

        /* Location Button Styles */
        .location-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 5px;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .location-btn:hover {
            background-color: #218838;
        }

        .location-status {
            margin-top: 5px;
            font-size: 0.9em;
            color: #666;
        }

        .location-status.success {
            color: #28a745;
        }

        .location-status.error {
            color: #dc3545;
        }

        @media (max-width: 768px) {
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "gifenc": "https://aistudiocdn.com/gifenc@^1.0.3",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.20.0"
  }
}
</script>
</head>
<body>
    <!-- Professional Announcement Bar -->
    <div class="announcement-bar">
        <div class="announcement-left">
            <img src="https://www2.0zz0.com/2025/09/26/15/391899626.png" alt="شعار أسواق تبارك" class="announcement-logo">
            <div class="announcement-text">أسواق تبارك - جودة تضمنها</div>
        </div>
        <div class="announcement-right">
            <div class="announcement-links">
                <a href="tel:+2010305660XX" class="announcement-link">
                    <i class="fas fa-phone-alt"></i>
                    اتصل بنا
                </a>
                <a href="https://wa.me/2010305660XX" target="_blank" class="announcement-link">
                    <i class="fab fa-whatsapp"></i>
                    واتساب
                </a>
                <a href="#" class="announcement-link">
                    <span class="announcement-badge">جديد</span>
                    <i class="fas fa-percentage"></i>
                    عروض حصرية
                </a>
            </div>
        </div>
    </div>
    
    <!-- Search and Filter Container - Moved to top with increased gap from announcement bar -->
    <div class="controls-container">
        <div class="controls-wrapper">
            <div id="search-container">
                <input type="text" id="search-input" placeholder="ابحث عن منتج...">
                <i class="fas fa-search"></i>
            </div>
            <div id="category-filter"></div>
        </div>
    </div>
    
    <div class="container">
        <header class="hide-on-search">
            <h1><img src="https://www2.0zz0.com/2025/09/26/15/391899626.png" alt="شعار أسواق تبارك" class="logo">أسواق تبارك</h1>
            <div class="contact-info">
                <span><i class="fas fa-map-marker-alt"></i>حدائق أكتوبر 390 فدان امام الملعب سنتر الفردوس</span>
                <a href="tel:+2010305660XX"><i class="fas fa-phone-alt"></i>+2010305660XX (دليفري)</a>
                <a href="https://wa.me/2010305660XX" target="_blank"><i class="fab fa-whatsapp"></i>+2010305660XX (واتساب)</a>
            </div>
        </header>
        <div class="secondary-announcement-bar hide-on-search">
            <i class="fas fa-bullhorn"></i> عروضنا الكبرى كل يوم جمعة من كل أسبوع - خصومات تصل إلى 50% على المنتجات المختارة
        </div>

        <!-- Simple and Reliable Slider Section -->
        <section class="slider-section hide-on-search">
            <h2 class="section-title">أكثر العروض توفيراً</h2>
            <div class="simple-slider" id="simpleSlider">
                <!-- Slides will be generated by JavaScript -->
            </div>
            <div class="slider-controls">
                <button class="slider-btn" id="prevSlide">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="slider-btn" id="nextSlide">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            <div class="slider-indicators" id="sliderIndicators">
                <!-- Indicators will be generated by JavaScript -->
            </div>
        </section>
        
        <!-- Special Offers Grid -->
        <section class="offers-section hide-on-search">
            <h2 class="section-title">عروض مميزة</h2>
            <div class="offers-grid" id="offersGrid">
                <!-- Offer cards will be generated by JavaScript -->
            </div>
        </section>
        
        <!-- Search Results Container -->
        <div class="search-results-container" id="searchResultsContainer">
            <div class="search-results-header">
                <h2 class="search-results-title">نتائج البحث</h2>
                <button class="clear-search-btn" id="clearSearchBtn">
                    <i class="fas fa-times"></i> مسح البحث
                </button>
            </div>
            <div id="searchResultsList">
                <!-- Search results will appear here -->
            </div>
        </div>
        
        <main class="hide-on-search">
            <h2 class="section-title">منتجاتنا</h2>
            <div id="product-list">
                <!-- المنتجات ستظهر هنا -->
            </div>
        </main>

        <section class="location-section hide-on-search">
            <h2 class="section-title">موقعنا</h2>
            <div class="location-content">
                <div class="location-details">
                    <h3>فرع 6 أكتوبر</h3>
                    <p><i class="fas fa-map-marker-alt"></i>حدائق أكتوبر منطقة 390فدان سنتر الفردوس أمام الملعب </p>
                    <p><i class="fas fa-clock"></i><strong>ساعات العمل:</strong> يومياً 24 ساعة</p>
                    <p>عروضنا متوفرة كل جمعة من كل أسبوع</p>
                    <p>جميع الحقوق محفوظة لأسواق تبارك 2025</p>
              </div>
                <div class="location-map">
                    <div class="map-container">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.292968442386!2d31.003345077255545!3d29.94225063480985!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x145851003dcc9bef%3A0xc9ea5239f1d807db!2z2KfYs9mI2KfZgiDYqtio2KfYsdmD!5e0!3m2!1sar!2seg!4v1760059879807!5m2!1sar!2seg" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                        width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" title="موقع أسواق تبارك فرع 6 أكتوبر"></iframe>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Image Modal -->
    <div id="image-modal" class="modal">
        <span class="close-modal">&times;</span>
        <img class="modal-content" id="modal-img">
        <div id="caption"></div>
    </div>

    <!-- Shopping Cart Elements -->
    <!-- Cart Icon - Moved to bottom left -->
    <div class="cart-icon" id="cartIcon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cartCount">0</span>
    </div>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>عربة التسوق</h3>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Cart items will appear here -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>المجموع:</span>
                <span id="cartTotal">0.00 جنيه</span>
            </div>
            <div class="delivery-fee">
                <span>رسوم التوصيل:</span>
                <span id="deliveryFee">10.00 جنيه</span>
            </div>
            <div class="final-total">
                <span>الإجمالي:</span>
                <span id="finalTotal">10.00 جنيه</span>
            </div>
            <button class="checkout-btn" id="checkoutBtn">إرسال الطلبية</button>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="checkout-modal" id="checkoutModal">
        <div class="checkout-form">
            <span class="close-modal-btn" id="closeCheckoutModal">&times;</span>
            <h2>إتمام الطلب</h2>
            <form id="orderForm">
                <div class="form-group">
                    <label for="customerName" class="required">اسم العميل</label>
                    <input type="text" id="customerName" name="customerName" required>
                </div>
                <div class="form-group">
                    <label for="customerPhone" class="required">رقم الموبايل</label>
                    <input type="tel" id="customerPhone" name="customerPhone" required>
                </div>
                <div class="form-group">
                    <label for="buildingNumber" class="required">رقم العمارة</label>
                    <input type="text" id="buildingNumber" name="buildingNumber" required>
                </div>
                <div class="form-group">
                    <label for="apartmentNumber" class="required">رقم الشقة</label>
                    <input type="text" id="apartmentNumber" name="apartmentNumber" required>
                </div>
                <div class="form-group">
                    <label for="location" class="required">الموقع الجغرافي</label>
                    <input type="text" id="location" name="location" readonly required>
                    <button type="button" class="location-btn" id="getLocationBtn">
                        <i class="fas fa-map-marker-alt"></i>
                        احصل على موقعي الحالي
                    </button>
                    <div class="location-status" id="locationStatus"></div>
                </div>
                <div class="form-group">
                    <label for="landmark">علامة مميزة (اختياري)</label>
                    <input type="text" id="landmark" name="landmark">
                </div>
                <button type="submit" class="submit-order-btn">إرسال الطلبية</button>
            </form>
        </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" id="successMessage">
        <h3>تم إرسال طلبك بنجاح!</h3>
        <p>سيتم التواصل معك قريباً لتأكيد الطلب.</p>
        <button id="closeSuccessMessage">حسناً</button>
    </div>

    <!-- Visitor Counter -->
    <div class="visitor-counter" id="visitorCounter">
        <i class="fas fa-users"></i>
        <span id="visitorCount">0</span> زائر
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Visitor Counter Logic
            const visitorCounter = document.getElementById('visitorCounter');
            const visitorCount = document.getElementById('visitorCount');
            
            // Check if this is a new visitor
            const hasVisitedBefore = localStorage.getItem('hasVisitedBefore');
            let totalVisitors = parseInt(localStorage.getItem('totalVisitors') || '0');
            
            // If this is a new visitor, increment the counter
            if (!hasVisitedBefore) {
                totalVisitors++;
                localStorage.setItem('totalVisitors', totalVisitors.toString());
                localStorage.setItem('hasVisitedBefore', 'true');
            }
            
            // Update the visitor count display
            visitorCount.textContent = totalVisitors;
            
            // Simple and Reliable Slider Logic
            const simpleSlider = document.getElementById('simpleSlider');
            const prevSlideBtn = document.getElementById('prevSlide');
            const nextSlideBtn = document.getElementById('nextSlide');
            const sliderIndicators = document.getElementById('sliderIndicators');
            const offersGrid = document.getElementById('offersGrid');
            
            // Featured offers for the slider
            const featuredOffers = [
                {
                    name: "طبق بيض أبيض",
                    oldPrice: "170.00 جنيه",
                    newPrice: "159.00 جنيه",
                    discount: "-25%",
                    image: "https://cdn.metro-cc.ru/ru/ru_pim_195676001001_01.png",
                    description: "بيض طازج من مزارع مختارة، غني بالبروتينات والفيتامينات الضرورية لصحة عائلتك"
                },
                {
                    name: "كيلو سمن سايب",
                    oldPrice: "120.00 جنيه",
                    newPrice: "100.00 جنيه",
                    discount: "-20%",
                    image: "https://akm-img-a-in.tosshub.com/indiatoday/images/story/201911/ghee.png",
                    description: "سمن طبيعي 100% من مصادر موثوقة، يضيف نكهة فريدة لأطباقك المفضلة"
                },
                {
                    name: "كيلو أرز وسط",
                    oldPrice: "28.00 جنيه",
                    newPrice: "22.00 جنيه",
                    discount: "-20%",
                    image: "https://www.albayan.ae/assets/archives/images/2023/08/25/4715792.jpg",
                    description: "أرز عالي الجودة، حبوب متوسطة الحجم مثالية للأطباق الشرقية التقليدية"
                },
                {
                    name: "2 زيت سندباد",
                    oldPrice: "130.00 جنيه",
                    newPrice: "105.00 جنيه",
                    discount: "-25%",
                    image: "https://lana.gov.ly/images/src/215410.jpg",
                    description: "زيت نباتي عالي الجودة، مثالي للطهي والقلي الصحي بدرجة حرارة عالية"
                }
            ];
            
            // Additional offers for the grid
            const additionalOffers = [
                {
                    name: "2 كيلو دقيق سايب",
                    oldPrice: "40.00 جنيه",
                    newPrice: "35.00 جنيه",
                    discount: "-25%",
                    image: "https://cdn.nur.kz/images/1200x675/7d9be34e89d9523d.jpeg"
                },
                {
                    name: "تونة معلبة",
                    oldPrice: "8.00 جنيه",
                    newPrice: "6.00 جنيه",
                    discount: "-25%",
                    image: "https://images.unsplash.com/photo-1598214662951-bcb83f085758?w=500&q=60"
                },
                {
                    name: "معجون طماطم",
                    oldPrice: "4.00 جنيه",
                    newPrice: "3.00 جنيه",
                    discount: "-25%",
                    image: "https://images.unsplash.com/photo-1608664838634-73d82f7c2a79?w=500&q=60"
                },
                {
                    name: "جبنة كريمية",
                    oldPrice: "18.00 جنيه",
                    newPrice: "13.50 جنيه",
                    discount: "-25%",
                    image: "https://images.unsplash.com/photo-1628088200424-44b4077fab41?w=500&q=60"
                }
            ];
            
            // Product data
            const products = [
                {
                    id: 1,
                    name: "طبق بيض أبيض",
                    price: 159.00,
                    oldPrice: 170.00,
                    category: "منتجات الألبان",
                    image: "https://cdn.metro-cc.ru/ru/ru_pim_195676001001_01.png"
                },
                {
                    id: 2,
                    name: "كيلو سمن سايب",
                    price: 100.00,
                    oldPrice: 120.00,
                    category: "زيوت ودهون",
                    image: "https://akm-img-a-in.tosshub.com/indiatoday/images/story/201911/ghee.png"
                },
                {
                    id: 3,
                    name: "كيلو أرز وسط",
                    price: 22.00,
                    oldPrice: 28.00,
                    category: "حبوب ومواد غذائية",
                    image: "https://www.albayan.ae/assets/archives/images/2023/08/25/4715792.jpg"
                },
                {
                    id: 4,
                    name: "2 زيت سندباد",
                    price: 105.00,
                    oldPrice: 130.00,
                    category: "زيوت ودهون",
                    image: "https://lana.gov.ly/images/src/215410.jpg"
                },
                {
                    id: 5,
                    name: "2 كيلو دقيق سايب",
                    price: 35.00,
                    oldPrice: 40.00,
                    category: "حبوب ومواد غذائية",
                    image: "https://cdn.nur.kz/images/1200x675/7d9be34e89d9523d.jpeg"
                },
                {
                    id: 6,
                    name: "تونة معلبة",
                    price: 6.00,
                    oldPrice: 8.00,
                    category: "معلبات",
                    image: "https://images.unsplash.com/photo-1598214662951-bcb83f085758?w=500&q=60"
                },
                {
                    id: 7,
                    name: "معجون طماطم",
                    price: 3.00,
                    oldPrice: 4.00,
                    category: "صلصات وتوابل",
                    image: "https://images.unsplash.com/photo-1608664838634-73d82f7c2a79?w=500&q=60"
                },
                {
                    id: 8,
                    name: "جبنة كريمية",
                    price: 13.50,
                    oldPrice: 18.00,
                    category: "منتجات الألبان",
                    image: "https://images.unsplash.com/photo-1628088200424-44b4077fab41?w=500&q=60"
                }
            ];
            
            let currentSlide = 0;
            let slideInterval;
            
            // Initialize simple slider
            function initSimpleSlider() {
                // Create slides
                featuredOffers.forEach((offer, index) => {
                    const slide = document.createElement('div');
                    slide.className = `slide ${index === 0 ? 'active' : ''}`;
                    slide.innerHTML = `
                        <div class="slide-content">
                            <div class="slide-image">
                                <img src="${offer.image}" alt="${offer.name}">
                                <div class="slide-badge">${offer.discount}</div>
                            </div>
                            <div class="slide-info">
                                <h3 class="slide-title">${offer.name}</h3>
                                <p class="slide-description">${offer.description}</p>
                                <div class="slide-price">
                                    <span class="slide-new-price">${offer.newPrice}</span>
                                    <span class="slide-old-price">${offer.oldPrice}</span>
                                </div>
                                <button class="slide-cta" data-product='${JSON.stringify(offer)}'>
                                    <i class="fas fa-cart-plus"></i> أضف للسلة
                                </button>
                            </div>
                        </div>
                    `;
                    simpleSlider.appendChild(slide);
                    
                    // Create indicator
                    const indicator = document.createElement('div');
                    indicator.className = `indicator ${index === 0 ? 'active' : ''}`;
                    indicator.addEventListener('click', () => goToSlide(index));
                    sliderIndicators.appendChild(indicator);
                });
                
                // Create offer cards for the grid
                additionalOffers.forEach(offer => {
                    const card = document.createElement('div');
                    card.className = 'offer-card';
                    card.innerHTML = `
                        <div class="offer-card-image">
                            <img src="${offer.image}" alt="${offer.name}">
                            <div class="offer-card-badge">${offer.discount}</div>
                        </div>
                        <div class="offer-card-content">
                            <h3 class="offer-card-title">${offer.name}</h3>
                            <div class="offer-card-price">
                                <span class="offer-card-new-price">${offer.newPrice}</span>
                                <span class="offer-card-old-price">${offer.oldPrice}</span>
                            </div>
                            <button class="offer-card-btn" data-product='${JSON.stringify(offer)}'>
                                <i class="fas fa-cart-plus"></i> أضف للسلة
                            </button>
                        </div>
                    `;
                    offersGrid.appendChild(card);
                });
                
                // Add event listeners to add to cart buttons
                document.querySelectorAll('.slide-cta, .offer-card-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const product = JSON.parse(this.dataset.product);
                        addToCart(product);
                        
                        // Show a brief notification
                        const originalHTML = this.innerHTML;
                        this.innerHTML = '<i class="fas fa-check"></i> تمت الإضافة';
                        this.disabled = true;
                        
                        setTimeout(() => {
                            this.innerHTML = originalHTML;
                            this.disabled = false;
                        }, 1500);
                    });
                });
                
                // Start auto-slide
                startSlideShow();
            }
            
            // Slider functions
            function goToSlide(index) {
                const slides = document.querySelectorAll('.slide');
                const indicators = document.querySelectorAll('.indicator');
                
                // Hide current slide
                slides[currentSlide].classList.remove('active');
                indicators[currentSlide].classList.remove('active');
                
                // Show new slide
                currentSlide = index;
                slides[currentSlide].classList.add('active');
                indicators[currentSlide].classList.add('active');
                
                // Reset auto-slide timer
                clearInterval(slideInterval);
                startSlideShow();
            }
            
            function nextSlide() {
                const slides = document.querySelectorAll('.slide');
                const nextIndex = (currentSlide + 1) % slides.length;
                goToSlide(nextIndex);
            }
            
            function prevSlide() {
                const slides = document.querySelectorAll('.slide');
                const prevIndex = (currentSlide - 1 + slides.length) % slides.length;
                goToSlide(prevIndex);
            }
            
            function startSlideShow() {
                slideInterval = setInterval(nextSlide, 5000);
            }
            
            // Initialize product list
            function initProductList() {
                const productList = document.getElementById('product-list');
                
                products.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.dataset.category = product.category;
                    
                    productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.name}">
                        <div class="product-info">
                            <h3>${product.name}</h3>
                            <div class="price">
                                ${product.oldPrice ? `<span class="old-price" style="text-decoration: line-through; color: #999; font-size: 0.9em; margin-left: 10px;">${product.oldPrice} جنيه</span>` : ''}
                                <span class="new-price">${product.price} جنيه</span>
                            </div>
                            <button class="add-to-cart-btn" data-product='${JSON.stringify(product)}'>
                                <i class="fas fa-cart-plus"></i> أضف للسلة
                            </button>
                        </div>
                    `;
                    
                    productList.appendChild(productCard);
                });
                
                // Add event listeners to add to cart buttons
                document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const product = JSON.parse(this.dataset.product);
                        addToCart(product);
                        
                        // Show a brief notification
                        const originalHTML = this.innerHTML;
                        this.innerHTML = '<i class="fas fa-check"></i> تمت الإضافة';
                        this.disabled = true;
                        
                        setTimeout(() => {
                            this.innerHTML = originalHTML;
                            this.disabled = false;
                        }, 1500);
                    });
                });
            }
            
            // Initialize category filter
            function initCategoryFilter() {
                const categoryFilter = document.getElementById('category-filter');
                const categories = [...new Set(products.map(product => product.category))];
                
                // Add "All" button
                const allBtn = document.createElement('button');
                allBtn.className = 'filter-btn active';
                allBtn.textContent = 'الكل';
                allBtn.dataset.category = 'all';
                categoryFilter.appendChild(allBtn);
                
                // Add category buttons
                categories.forEach(category => {
                    const btn = document.createElement('button');
                    btn.className = 'filter-btn';
                    btn.textContent = category;
                    btn.dataset.category = category;
                    categoryFilter.appendChild(btn);
                });
                
                // Add event listeners to filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        // Update active state
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        
                        // Filter products
                        const category = this.dataset.category;
                        const productCards = document.querySelectorAll('.product-card');
                        
                        productCards.forEach(card => {
                            if (category === 'all' || card.dataset.category === category) {
                                card.style.display = 'flex';
                            } else {
                                card.style.display = 'none';
                            }
                        });
                    });
                });
            }
            
            // Search functionality
            function initSearch() {
                const searchInput = document.getElementById('search-input');
                const searchResultsContainer = document.getElementById('searchResultsContainer');
                const searchResultsList = document.getElementById('searchResultsList');
                const clearSearchBtn = document.getElementById('clearSearchBtn');
                const elementsToHide = document.querySelectorAll('.hide-on-search');
                
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase().trim();
                    
                    if (searchTerm.length > 0) {
                        // Show search results container and hide other elements
                        searchResultsContainer.classList.add('active');
                        elementsToHide.forEach(element => {
                            element.style.display = 'none';
                        });
                        
                        // Filter products based on search term
                        const filteredProducts = products.filter(product => 
                            product.name.toLowerCase().includes(searchTerm)
                        );
                        
                        // Clear previous results
                        searchResultsList.innerHTML = '';
                        
                        if (filteredProducts.length > 0) {
                            // Display search results
                            const resultsGrid = document.createElement('div');
                            resultsGrid.className = 'product-list';
                            resultsGrid.style.display = 'grid';
                            resultsGrid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(280px, 1fr))';
                            resultsGrid.style.gap = '25px';
                            
                            filteredProducts.forEach(product => {
                                const productCard = document.createElement('div');
                                productCard.className = 'product-card';
                                
                                productCard.innerHTML = `
                                    <img src="${product.image}" alt="${product.name}">
                                    <div class="product-info">
                                        <h3>${product.name}</h3>
                                        <div class="price">
                                            ${product.oldPrice ? `<span class="old-price" style="text-decoration: line-through; color: #999; font-size: 0.9em; margin-left: 10px;">${product.oldPrice} جنيه</span>` : ''}
                                            <span class="new-price">${product.price} جنيه</span>
                                        </div>
                                        <button class="add-to-cart-btn" data-product='${JSON.stringify(product)}'>
                                            <i class="fas fa-cart-plus"></i> أضف للسلة
                                        </button>
                                    </div>
                                `;
                                
                                resultsGrid.appendChild(productCard);
                            });
                            
                            searchResultsList.appendChild(resultsGrid);
                            
                            // Add event listeners to add to cart buttons
                            document.querySelectorAll('#searchResultsList .add-to-cart-btn').forEach(btn => {
                                btn.addEventListener('click', function() {
                                    const product = JSON.parse(this.dataset.product);
                                    addToCart(product);
                                    
                                    // Show a brief notification
                                    const originalHTML = this.innerHTML;
                                    this.innerHTML = '<i class="fas fa-check"></i> تمت الإضافة';
                                    this.disabled = true;
                                    
                                    setTimeout(() => {
                                        this.innerHTML = originalHTML;
                                        this.disabled = false;
                                    }, 1500);
                                });
                            });
                        } else {
                            // Display no results message
                            const noResults = document.createElement('div');
                            noResults.className = 'no-results';
                            noResults.innerHTML = `
                                <i class="fas fa-search" style="font-size: 3em; margin-bottom: 15px; color: var(--secondary-color);"></i>
                                <p>لم يتم العثور على نتائج لـ "${searchTerm}"</p>
                                <p>يرجى المحاولة بكلمات مفتاحية مختلفة</p>
                            `;
                            searchResultsList.appendChild(noResults);
                        }
                    } else {
                        // Hide search results container and show other elements
                        searchResultsContainer.classList.remove('active');
                        elementsToHide.forEach(element => {
                            element.style.display = '';
                        });
                    }
                });
                
                // Clear search button functionality
                clearSearchBtn.addEventListener('click', function() {
                    searchInput.value = '';
                    searchResultsContainer.classList.remove('active');
                    elementsToHide.forEach(element => {
                        element.style.display = '';
                    });
                });
            }
            
            // Shopping Cart functionality
            let cart = [];
            const cartIcon = document.getElementById('cartIcon');
            const cartSidebar = document.getElementById('cartSidebar');
            const closeCart = document.getElementById('closeCart');
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const cartTotal = document.getElementById('cartTotal');
            const finalTotal = document.getElementById('finalTotal');
            const checkoutBtn = document.getElementById('checkoutBtn');
            const checkoutModal = document.getElementById('checkoutModal');
            const closeCheckoutModal = document.getElementById('closeCheckoutModal');
            const orderForm = document.getElementById('orderForm');
            const successMessage = document.getElementById('successMessage');
            const closeSuccessMessage = document.getElementById('closeSuccessMessage');
            const getLocationBtn = document.getElementById('getLocationBtn');
            const locationInput = document.getElementById('location');
            const locationStatus = document.getElementById('locationStatus');
            
            // Load cart from localStorage
            function loadCart() {
                const savedCart = localStorage.getItem('tabarakCart');
                if (savedCart) {
                    cart = JSON.parse(savedCart);
                    updateCartUI();
                }
            }
            
            // Save cart to localStorage
            function saveCart() {
                localStorage.setItem('tabarakCart', JSON.stringify(cart));
            }
            
            // Add product to cart
            function addToCart(product) {
                const existingItem = cart.find(item => item.name === product.name);
                
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({
                        ...product,
                        quantity: 1
                    });
                }
                
                saveCart();
                updateCartUI();
                
                // Show cart sidebar
                cartSidebar.classList.add('active');
            }
            
            // Update cart UI
            function updateCartUI() {
                // Clear cart items
                cartItems.innerHTML = '';
                
                let total = 0;
                let itemCount = 0;
                
                // Add cart items
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    itemCount += item.quantity;
                    
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <img src="${item.image}" alt="${item.name}">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${item.price} جنيه</div>
                        </div>
                        <div class="quantity-controls">
                            <button class="quantity-btn decrease-quantity" data-name="${item.name}">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn increase-quantity" data-name="${item.name}">+</button>
                        </div>
                    `;
                    
                    cartItems.appendChild(cartItem);
                });
                
                // Update cart count and total
                cartCount.textContent = itemCount;
                cartTotal.textContent = `${total.toFixed(2)} جنيه`;
                
                // Calculate final total with delivery fee
                const deliveryFee = 10.00;
                const finalTotalAmount = total + deliveryFee;
                finalTotal.textContent = `${finalTotalAmount.toFixed(2)} جنيه`;
                
                // Add event listeners to quantity buttons
                document.querySelectorAll('.decrease-quantity').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const name = this.dataset.name;
                        const item = cart.find(item => item.name === name);
                        
                        if (item) {
                            item.quantity--;
                            
                            if (item.quantity <= 0) {
                                cart = cart.filter(item => item.name !== name);
                            }
                            
                            saveCart();
                            updateCartUI();
                        }
                    });
                });
                
                document.querySelectorAll('.increase-quantity').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const name = this.dataset.name;
                        const item = cart.find(item => item.name === name);
                        
                        if (item) {
                            item.quantity++;
                            saveCart();
                            updateCartUI();
                        }
                    });
                });
            }
            
            // Get user location
            function getUserLocation() {
                if (navigator.geolocation) {
                    locationStatus.textContent = 'جاري تحديد موقعك...';
                    locationStatus.className = 'location-status';
                    
                    navigator.geolocation.getCurrentPosition(
                        position => {
                            const { latitude, longitude } = position.coords;
                            locationInput.value = `${latitude}, ${longitude}`;
                            locationStatus.textContent = 'تم تحديد موقعك بنجاح';
                            locationStatus.className = 'location-status success';
                        },
                        error => {
                            locationStatus.textContent = 'فشل في تحديد موقعك: ' + error.message;
                            locationStatus.className = 'location-status error';
                        }
                    );
                } else {
                    locationStatus.textContent = 'المتصفح لا يدعم تحديد الموقع';
                    locationStatus.className = 'location-status error';
                }
            }
            
            // Submit order - send to multiple WhatsApp numbers
            function submitOrder(e) {
                e.preventDefault();
                
                const formData = new FormData(orderForm);
                const orderData = {
                    customer: {
                        name: formData.get('customerName'),
                        phone: formData.get('customerPhone'),
                        buildingNumber: formData.get('buildingNumber'),
                        apartmentNumber: formData.get('apartmentNumber'),
                        location: formData.get('location'),
                        landmark: formData.get('landmark')
                    },
                    items: cart,
                    total: cartTotal.textContent,
                    deliveryFee: '10.00 جنيه',
                    finalTotal: finalTotal.textContent
                };
                
                // Create WhatsApp message with order details
                let message = `طلب جديد من ${orderData.customer.name}\n\n`;
                message += `رقم الهاتف: ${orderData.customer.phone}\n`;
                message += `العنوان: عمارة ${orderData.customer.buildingNumber}، شقة ${orderData.customer.apartmentNumber}\n`;
                message += `الموقع: ${orderData.customer.location}\n`;
                if (orderData.customer.landmark) {
                    message += `علامة مميزة: ${orderData.customer.landmark}\n`;
                }
                message += `\nالمنتجات:\n`;
                
                cart.forEach(item => {
                    message += `- ${item.name} × ${item.quantity} = ${(item.price * item.quantity).toFixed(2)} جنيه\n`;
                });
                
                message += `\n${orderData.total}\n`;
                message += `رسوم التوصيل: ${orderData.deliveryFee}\n`;
                message += `الإجمالي: ${orderData.finalTotal}`;
                
                // WhatsApp numbers to send the order to
                const whatsappNumbers = [
                    '201030566078',
                    '201118091234',
                    '201095348285'
                ];
                
                // Send the order to all WhatsApp numbers
                whatsappNumbers.forEach(number => {
                    window.open(`https://wa.me/${number}?text=${encodeURIComponent(message)}`, '_blank');
                });
                
                // Close checkout modal
                checkoutModal.classList.remove('active');
                
                // Show success message
                successMessage.classList.add('active');
                
                // Clear cart
                cart = [];
                saveCart();
                updateCartUI();
                
                // Reset form
                orderForm.reset();
            }
            
            // Event listeners
            cartIcon.addEventListener('click', () => {
                cartSidebar.classList.add('active');
            });
            
            closeCart.addEventListener('click', () => {
                cartSidebar.classList.remove('active');
            });
            
            checkoutBtn.addEventListener('click', () => {
                if (cart.length === 0) {
                    alert('عربة التسوق فارغة!');
                    return;
                }
                
                checkoutModal.classList.add('active');
            });
            
            closeCheckoutModal.addEventListener('click', () => {
                checkoutModal.classList.remove('active');
            });
            
            closeSuccessMessage.addEventListener('click', () => {
                successMessage.classList.remove('active');
            });
            
            getLocationBtn.addEventListener('click', getUserLocation);
            
            orderForm.addEventListener('submit', submitOrder);
            
            // Image Modal
            const modal = document.getElementById('image-modal');
            const modalImg = document.getElementById('modal-img');
            const caption = document.getElementById('caption');
            const closeModal = document.querySelector('.close-modal');
            
            // Add click event to all product images
            document.addEventListener('click', function(e) {
                if (e.target.tagName === 'IMG' && e.target.closest('.product-card, .slide-image, .offer-card-image')) {
                    modal.style.display = 'block';
                    modalImg.src = e.target.src;
                    caption.textContent = e.target.alt;
                }
            });
            
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // Close modal when clicking outside of it
            window.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Slider controls
            prevSlideBtn.addEventListener('click', prevSlide);
            nextSlideBtn.addEventListener('click', nextSlide);
            
            // Initialize everything
            initSimpleSlider();
            initProductList();
            initCategoryFilter();
            initSearch();
            loadCart();
        });
    </script>
</body>
</html>
